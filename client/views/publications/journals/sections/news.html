<template name="newContent">
    <div class="tabbable">
        <div class="col-xs-3">
            <ul class="nav nav-pills nav-stacked aboutNavTabs">
                <li class="active"><a class="activeButton" data-topicstid="a1" href="#a1"  data-toggle="tab">{{_ "News Center"}}</a></li>
                <li><a class="activeButton" data-topicstid="b1" href="#b1"  data-toggle="tab">{{_ "Publishing Dynamic"}}</a></li>
                <li><a class="activeButton" data-topicstid="c1" href="#c1"  data-toggle="tab">{{_ "Meeting Information"}}</a></li>
            </ul>
        </div>
        <div class="tab-content col-xs-9">
            <div class="tab-pane active" id="a1"><div class="part"><strong>{{_ "News Center"}}</strong>
                <div class="pull-right">
                    {{#if can "add-news" "resource"  }}
                    <span class="fa fa-plus" style="color: #2b8118;cursor: pointer" data-toggle="modal" data-target="#addNewsCenterModal"></span>{{> addNewsCenterModalForm}}
                    {{/if}}
                </div>
            </div><hr>
                {{> newsCenterList}}
            </div>
            <div class="tab-pane" id="b1"><div class="part"><strong>{{_ "Publishing Dynamic"}}</strong>
                <div class="pull-right">
                    {{#if can "add-news" "resource"  }}
                        <span class="fa fa-plus" style="color: #2b8118;cursor: pointer" data-toggle="modal" data-target="#addPublishingDynamicModal"></span>{{> addPublishingDynamicForm}}
                    {{/if}}
                </div>
            </div><hr>
                {{> pubDynamicList}}
            </div>
            <div class="tab-pane" id="c1"><div class="part"><strong>{{_ "Meeting Information"}}</strong><div class="pull-right">{{#if can "add-meeting-info" "resource"  }}{{> addMeetingInfoModalForm}}{{/if}}</div></div><hr>
                {{> meetingInfoList}}
            </div>
        </div>
    </div>
</template>

<template name="newsCenterList">
    {{#each newsContent}}
    <div class="part"><p>
        <a href="{{whichUrl}}" target="_blank"><strong>{{translateThis title.cn title.en}}&nbsp;：</strong></a>

        <div class="pull-right">
            {{#if can "modify-news" "resource"  }}{{> updateNewsCenterModalForm}}{{/if}}
            {{#if can "delete-news" "resource"  }}<a href="#" class="fa fa-trash"></a>{{/if}}
        </div>
        </p>
        <p>
            {{{translateThis abstract.cn abstract.en}}}
        </p>
    </div>
    {{else}}
    {{_ "No content found!"}}
    {{/each}}
</template>

<template name="pubDynamicList">
    {{#each pubDynamic}}
    <div class="part"><p>
        <a href={{url}} target="_blank"><strong>{{translateThis title.cn title.en}}&nbsp;：</strong></a>

        <div class="pull-right">
            {{#if can "modify-news" "resource"  }}{{> updatePublishingDynamicModalForm}}{{/if}}
            {{#if can "delete-news" "resource"  }}<a href="#" class="fa fa-trash"></a>{{/if}}
        </div>
        </p>
        <p>
            <img src="{{getImageHelper picture}}" width="89" height="126"/>{{{translateThis abstract.cn abstract.en}}}
        </p>
    </div>
    {{else}}
    {{_ "No content found!"}}
    {{/each}}
</template>

<template name="meetingInfoList">
    {{#each meetingContent}}
    <div class="part"><p>
        <a href={{url}} target="_blank"><strong>{{translateThis title.cn title.en}}&nbsp;：</strong></a>

        <div class="pull-right">
            {{#if can "modify-meeting-info" "resource"  }}{{> updateMeetingInfoModalForm}}{{/if}}
            {{#if can "delete-meeting-info" "resource"  }}<a href="#" class="fa fa-trash"></a>{{/if}}
        </div>
        </p>
        <p>
            {{#if StartDate}}
                {{_"Meeting Time"}}：&nbsp;{{startDate}}&nbsp;&nbsp;
            {{/if}}
            {{#if Phone}}
                {{_"Contact Way"}}：&nbsp;{{phone}}<br>
            {{/if}}
            {{#if Address}}
                {{_"Address"}}：&nbsp;{{translateThis address.cn address.en}}<br>
            {{/if}}
            {{#if Theme}}
                {{_"Conference Theme"}}：&nbsp;{{{translateThis theme.cn theme.en}}}
            {{/if}}
        </p>
    </div>
    {{else}}
    {{_ "No content found!"}}
    {{/each}}
</template>


<template name="addNewsCenterModalForm">
    <div class="modal fade" id="addNewsCenterModal" tabindex="-1" role="dialog" aria-labelledby="addNewsCenterModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addNewsCenterModalLabel">{{_ "Add new"}}</h4>
                </div>
                {{#autoForm id="addNewsCenterModalForm" collection="News" type="insert"}}
                <div class="modal-body">
                    {{> afQuickField name="title"}}
                    {{> afQuickField name="author"}}
                    {{> afQuickField name="abstract"}}
                    {{> afQuickField name="content"}}
                    {{> afQuickField name="url"}}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">{{_ "Create"}}</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="updateNewsCenterModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="News" doc=_id operation="update" fields="title,author,abstract,content,url" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>


<template name="addPublishingDynamicForm">
    <div class="modal fade" id="addPublishingDynamicModal" tabindex="-1" role="dialog" aria-labelledby="addPublishingDynamicModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addPublishingDynamicModalLabel">{{_ "Add new"}}</h4>
                </div>
                {{#autoForm id="addPublishingDynamicForm" collection="News" type="insert"}}
                <div class="modal-body">
                    {{> afQuickField name="title"}}
                    {{> afQuickField name="url"}}
                    {{> afQuickField name="abstract"}}
                    {{> afQuickField name="picture"}}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">{{_ "Create"}}</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="updatePublishingDynamicModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="News" doc=_id operation="update" fields="title,url,abstract,picture" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>


<template name="addMeetingInfoModalForm">
    {{#afModal formId="addMeetingInfoModal" class="fa fa-plus" collection="Meeting" operation="insert" omitFields="about,publications" title=getCreateButtonContent}}{{/afModal}}
</template>

<template name="updateMeetingInfoModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Meeting" doc=_id operation="update" omitFields="about,publications"}}{{/afModal}}
</template>