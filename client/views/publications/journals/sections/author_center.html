<template name="authorCenterList">
    {{> publicationPdfContent}}
    <div class="part"><h4> >> {{_ "Guide for Authors"}}</h4> </div>
    {{> guideArticles}}
    <div class="part"><h4> >> {{_ "The author article history"}}</h4> </div>
    {{> authorArticlesHistory}}
</template>

<template name="publicationPdfContent">
    <div class="dotted">
        {{#each authorResources}}
            <div class="col-xs-5">
                <p>
                    <strong>{{translateThis authorTitle.cn authorTitle.en}} >> </strong>
                    {{#if permissionCheckWithScope "modify-journal" "resource" "journal" _id}}
                        {{> updateAuthorCenterTitleModalForm}}
                    {{/if}}
                </p>
                <p>
                    {{{translateThis authorDescription.cn authorDescription.en}}}
                </p>
            </div>
            <div class="col-xs-3" style="margin-top: 20px">
                <img src="{{getImageHelper authorPicture}}" height="105" width="120">
                {{#if permissionCheckWithScope "modify-journal" "resource" "journal" _id}}
                    <div class="pull-right">
                        {{> updateAuthorCenterPictureModalForm}}
                    </div>
                {{/if}}
            </div>
            <div class="col-xs-4" style="margin-top: 60px">
                <p>
                    <a href="{{pdfValue}}" target="_blank">{{translateThis fileName.cn fileName.en}}&nbsp;&nbsp;<img src="/pdf.png" height="18" width="21"></a>
                    {{#if permissionCheckWithScope "modify-journal" "resource" "journal" _id}}
                        {{> updateAuthorCenterFileModalForm}}
                    {{/if}}
                </p>
            </div>
        {{else}}
            {{_ "No results found!"}}
        {{/each}}
    </div>
</template>

<template name="guideArticles">
    <div class="col-xs-4">
        <div class="part h220">
            <div class="dotted mb15 text-center" >
                <h5 style="margin-left: 5px">{{_ "Submission Guidelines"}}
                {{#if permissionCheckWithScope "modify-journal" "resource" "journal" _id}}
                    <span class="fa fa-plus" style="color: #2b8118;cursor: pointer;font-size:12px;" data-toggle="modal" data-target="#addInstructionsModal"></span>
                    {{> addInstructionsModalForm}}
                {{/if}}</h5>
            </div>
            {{#each instructions}}
                <ul>
                    <li style="margin-left: -25px;">
                        <a style="font-size: 12px" href={{whichUrl}}>{{{translateThis title.cn title.en}}}</a>
                        {{#if permissionCheckWithScope "modify-journal" "resource" "journal" publications}}
                            {{> updateAuthorCenterModalForm}}
                        {{/if}}
                        {{#if can "delete-author-center" "resource"  }}
                            <a href="#" class="fa fa-trash"></a>
                        {{/if}}
                    </li>
                </ul>
            {{else}}
                {{_ "No results found!"}}
            {{/each}}
        </div>
    </div>
    <div class="col-xs-4">
        <div class="part h220">
            <div class="dotted mb15 text-center">
                <h5 style="margin-left: 5px">{{_ "Prepare Manuscript"}}
                {{#if permissionCheckWithScope "modify-journal" "resource" "journal" _id}}
                    <span class="fa fa-plus" style="color: #2b8118;cursor: pointer;font-size:12px;" data-toggle="modal" data-target="#addManuscriptModal"></span>
                    {{> addManuscriptModalForm}}
                {{/if}}</h5>
            </div>
            {{#each manuscript}}
                <p style="font-size: 12px"><strong> >> {{{translateThis title.cn title.en}}}</strong>
                    {{#if permissionCheckWithScope "modify-journal" "resource" "journal" publications}}
                        {{> updateSubmitManuscriptModalForm}}
                    {{/if}}
                    {{#if can "delete-author-center" "resource"  }}
                        <a href="#" class="fa fa-trash"></a>
                    {{/if}}
                </p>
                {{#each childList}}
                    <ul>
                        <li style="margin-left: -20px;"><a style="font-size: 12px;" href={{whichUrl}}>{{{translateThis title.cn title.en}}}</a>
                            {{#if permissionCheckWithScope "modify-journal" "resource" "journal" publications}}
                                {{>jkafModal template="updateManuscriptModalForm" doc=this id="updateManuscriptModal"}}
                            {{/if}}
                            {{#if can "delete-author-center" "resource"  }}
                                <a href="#" class="fa fa-trash"></a>
                            {{/if}}
                        </li>
                    </ul>
                {{else}}
                {{/each}}
            {{else}}
                {{_ "No results found!"}}
            {{/each}}
        </div>
    </div>
    <div class="col-xs-4">
        <div class="part h220">
            <div class="dotted mb15 text-center">
                <h5 style="margin-left: 5px">{{_ "Submit  Manuscript"}}
                {{#if permissionCheckWithScope "modify-journal" "resource" "journal" _id}}
                    <span class="fa fa-plus" style="color: #2b8118;cursor: pointer;font-size:12px;" data-toggle="modal" data-target="#addSubmitManuscriptModal"></span>
                    {{> addSubmitManuscriptModalForm}}
                {{/if}}</h5>
            </div>
            {{#each submitManuscript}}
                <ul>
                    <li style="margin-left: -25px;"><a style="font-size: 12px" href={{whichUrl}}>{{{translateThis title.cn title.en}}}</a>
                        {{#if permissionCheckWithScope "modify-journal" "resource" "journal" publications}}
                            {{> updateSubmitManuscriptModalForm}}
                        {{/if}}
                        {{#if can "delete-author-center" "resource"  }}
                            <a href="#" class="fa fa-trash"></a>
                        {{/if}}
                    </li>
                </ul>
            {{else}}
                {{_ "No results found!"}}
            {{/each}}
        </div>
    </div>
</template>

<template name="authorArticlesHistory">
    <div class="form-group form-inline">
        <label for="exampleInputName2">{{_ "Author"}}：</label>
        <input type="text" id="authorName" class="form-control">&nbsp;&nbsp;&nbsp;&nbsp;
        <label for="exampleInputName2">{{_ "Company name"}}：</label>
        <input type="text" id="affiliation" class="form-control">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <button class="btn btn-info btn-sm" id="searchAuthor">{{_ "search"}}</button>
    </div>
</template>

<template name="updateAuthorCenterTitleModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="authorTitle,authorDescription" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>

<template name="updateAuthorCenterPictureModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="authorPicture" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>

<template name="updateAuthorCenterFileModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="fileName,fileId" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>


<template name="addInstructionsModalForm">
    <div class="modal fade text-left" id="addInstructionsModal" role="dialog" aria-labelledby="addInstructionsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addInstructionsModalLabel">{{_ "Add new"}}</h4>
                </div>
                {{#autoForm id="addInstructionsModalForm" collection="AuthorCenter" type="insert"}}
                <div class="modal-body">
                    {{> afQuickField name="title"}}
                    {{> afQuickField name="content"}}
                    {{> afQuickField name="url"}}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">{{_ "Create"}}</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="addManuscriptModalForm">
    <div class="modal fade text-left" id="addManuscriptModal" role="dialog" aria-labelledby="addManuscriptModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addManuscriptModalLabel">{{_ "Add new"}}</h4>
                </div>
                {{#autoForm id="addManuscriptModalForm" collection="AuthorCenter" type="insert"}}
                <div class="modal-body">
                    {{> afQuickField name="title"}}
                    {{> afQuickField name="content"}}
                    {{> afQuickField name="url"}}
                    {{> afQuickField name="parentId" options=getManuscript }}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">{{_ "Create"}}</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="addSubmitManuscriptModalForm">
    <div class="modal fade text-left" id="addSubmitManuscriptModal" role="dialog" aria-labelledby="addSubmitManuscriptModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addSubmitManuscriptModalLabel">{{_ "Add new"}}</h4>
                </div>
                {{#autoForm id="addSubmitManuscriptModalForm" collection="AuthorCenter" type="insert"}}
                <div class="modal-body">
                    {{> afQuickField name="title"}}
                    {{> afQuickField name="url"}}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">{{_ "Create"}}</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="updateManuscriptModalForm">
    {{#autoForm doc=this collection="AuthorCenter" id="updateManuscriptModal" type="update" buttonContent=getUpdateButtonContent}}
    <fieldset>
        {{> afQuickField name="title"}}
        {{> afQuickField name="content"}}
        {{> afQuickField name="url"}}
        {{> afQuickField name="parentId" options=getManuscript }}
    </fieldset>
    <button type="submit" class="btn btn-primary">{{_ "Update"}}</button>
    {{/autoForm}}
</template>

<template name="updateAuthorCenterModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="AuthorCenter" doc=_id operation="update" fields="title,content,url" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>

<template name="updateSubmitManuscriptModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="AuthorCenter" doc=_id operation="update" fields="title,url" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>