<template name="authorCenterList">
    {{> publicationPdfContent}}
    <div class="part"><strong> >> {{_"Guide for Authors"}}</strong> </div>
    {{> guideArticles}}
    <div class="part"><strong> >> {{_"The author article history"}}</strong> </div>
    {{> authorArticlesHistory}}
</template>

<template name="publicationPdfContent">
    <div class="part" style="margin-top: 10px">
        {{#each authorResources}}
            <div class="col-xs-5"><strong>{{translateThis authorTitle.cn authorTitle.en}} {{#if AuthorTitle}}>>{{/if}} </strong><br><p>{{{translateThis authorDescription.cn authorDescription.en}}}{{#if can "modify-journal" "resource"  }}{{> updateAuthorCenterTitleModalForm}}{{/if}}</p></div>
            <div class="col-xs-3" style="margin-top: 20px"><img src="{{getImageHelper authorPicture}}" height="105" width="120">{{#if can "modify-journal" "resource"  }}{{> updateAuthorCenterPictureModalForm}}{{/if}}</div>
            <div class="col-xs-4" style="margin-top: 60px"><p><a href="{{pdfValue}}" target="_blank">{{translateThis fileName.cn fileName.en}}&nbsp;&nbsp;{{#if FileName}}<img src="/pdf.png" height="18" width="21">{{/if}}</a>{{#if can "modify-journal" "resource"  }}{{> updateAuthorCenterFileModalForm}}{{/if}}</p></div>
        {{else}}
            {{_ "No results found!"}}
        {{/each}}
    </div>
</template>

<template name="guideArticles">
    <div class="col-xs-4">
        <div class="part h220">
            <div class="dotted mb15">
                <strong style="margin-left: 30%">{{_"Submission Guidelines"}}</strong>
                {{#if can "add-author-center" "resource"  }}<span class="fa fa-plus" style="color: #2b8118;cursor: pointer" data-toggle="modal" data-target="#addInstructionsModal"></span>{{> addInstructionsModalForm}}{{/if}}
            </div>
            {{#each instructions}}
                <ul>
                    <li><a href={{whichUrl}} target="_blank">{{translateThis title.cn title.en}}</a>{{#if can "modify-author-center" "resource"  }}{{> updateAuthorCenterModalForm}}{{/if}}</li>
                </ul>
            {{else}}
                {{_ "No results found!"}}
            {{/each}}
        </div>
    </div>
    <div class="col-xs-4">
        <div class="part h220">
            <div class="dotted mb15">
                <strong style="margin-left: 30%">{{_"Prepare Manuscript"}}</strong>
                {{#if can  "add-author-center" "resource"  }}<span class="fa fa-plus" style="color: #2b8118;cursor: pointer" data-toggle="modal" data-target="#addManuscriptModal"></span>{{> addManuscriptModalForm}}{{/if}}
            </div>
            {{#each manuscript}}
                <p> >> {{translateThis title.cn title.en}}{{#if can "modify-author-center" "resource"  }}{{> updateSubmitManuscriptModalForm}}{{/if}}</p>
                {{#each childList}}
                    <ul>
                        <li><a href={{whichUrl}} target="_blank">{{translateThis title.cn title.en}}</a>{{#if can "modify-author-center" "resource"  }}{{>jkafModal template="updateManuscriptModalForm" doc=this id="updateManuscriptModal"}}{{/if}}</li>
                    </ul>
                {{else}}
                    {{_ "No results found!"}}
                {{/each}}
            {{else}}
                {{_ "No results found!"}}
            {{/each}}
        </div>
    </div>
    <div class="col-xs-4">
        <div class="part h220">
            <div class="dotted mb15">
                <strong style="margin-left: 30%">{{_"Submit  Manuscript"}}</strong>
                {{#if can "add-author-center" "resource"  }}<span class="fa fa-plus" style="color: #2b8118;cursor: pointer" data-toggle="modal" data-target="#addSubmitManuscriptModal"></span>{{> addSubmitManuscriptModalForm}}{{/if}}
            </div>
            {{#each submitManuscript}}
                <ul>
                    <li><a href={{whichUrl}} target="_blank">{{translateThis title.cn title.en}}</a>{{#if can "modify-author-center" "resource"  }}{{> updateSubmitManuscriptModalForm}}{{/if}}</li>
                </ul>
            {{else}}
                {{_ "No results found!"}}
            {{/each}}
        </div>
    </div>
</template>

<template name="authorArticlesHistory">
    <div class="form-group form-inline">
        <label for="exampleInputName2">{{_"Author"}}：</label>
        <input type="text" class="form-control" placeholder="作者名称">&nbsp;&nbsp;&nbsp;&nbsp;
        <label for="exampleInputName2">{{_"Company name"}}：</label>
        <input type="text" class="form-control" placeholder="作者单位">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <button class="btn btn-info btn-sm">{{_"search"}}</button>
    </div>
</template>

<template name="updateAuthorCenterTitleModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="authorTitle,authorDescription" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>

<template name="updateAuthorCenterPictureModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="authorPicture" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>

<template name="updateAuthorCenterFileModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="fileName,fileId" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>


<template name="addInstructionsModalForm">
    <div class="modal fade" id="addInstructionsModal" tabindex="-1" role="dialog" aria-labelledby="addInstructionsModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addInstructionsModalLabel">{{_ "Add new"}}</h4>
                </div>
                {{#autoForm id="addInstructionsModalForm" collection="AuthorCenter" type="insert"}}
                <div class="modal-body">
                    {{> afQuickField name="title"}}
                    {{> afQuickField name="content"}}
                    {{> afQuickField name="url"}}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">{{_ "Create"}}</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="addManuscriptModalForm">
    <div class="modal fade" id="addManuscriptModal" tabindex="-1" role="dialog" aria-labelledby="addManuscriptModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addManuscriptModalLabel">{{_ "Add new"}}</h4>
                </div>
                {{#autoForm id="addManuscriptModalForm" collection="AuthorCenter" type="insert"}}
                <div class="modal-body">
                    {{> afQuickField name="title"}}
                    {{> afQuickField name="content"}}
                    {{> afQuickField name="url"}}
                    {{> afQuickField name="parentId" options=getManuscript }}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">{{_ "Create"}}</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="addSubmitManuscriptModalForm">
    <div class="modal fade" id="addSubmitManuscriptModal" tabindex="-1" role="dialog" aria-labelledby="addSubmitManuscriptModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addSubmitManuscriptModalLabel">{{_ "Add new"}}</h4>
                </div>
                {{#autoForm id="addSubmitManuscriptModalForm" collection="AuthorCenter" type="insert"}}
                <div class="modal-body">
                    {{> afQuickField name="title"}}
                    {{> afQuickField name="url"}}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">{{_ "Create"}}</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="updateManuscriptModalForm">
    {{#autoForm doc=this collection="AuthorCenter" id="updateManuscriptModal" type="update" buttonContent=getUpdateButtonContent}}
    <fieldset>
        {{> afQuickField name="title"}}
        {{> afQuickField name="content"}}
        {{> afQuickField name="url"}}
        {{> afQuickField name="parentId" options=getManuscript }}
    </fieldset>
    <button type="submit" class="btn btn-primary">{{_ "Update"}}</button>
    {{/autoForm}}
</template>

<template name="updateAuthorCenterModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="AuthorCenter" doc=_id operation="update" fields="title,content,url" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>

<template name="updateSubmitManuscriptModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="AuthorCenter" doc=_id operation="update" fields="title,url" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>