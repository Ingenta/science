<template name="authorCenterList">
    {{> publicationPdfContent}}
    <hr>
    <p style="background-color: #ffb733"><h4><b>>>&nbsp;{{_"Guide for Authors"}}</b></h4></p>
    {{> guideArticles}}
</template>

<template name="publicationPdfContent">
    <div class="row" style="margin-top: 10px">
        {{#each authorResources}}
        <div class="col-xs-5"><h4><b>{{translateThis authorTitle.cn authorTitle.en}}&nbsp;>></b></h4><br><span>{{{translateThis authorDescription.cn authorDescription.en}}}{{#if can "modify-journal" "resource"  }}{{> updateAuthorCenterTitleModalForm}}{{/if}}</span></div>
        <div class="col-xs-3" style="margin-top: 20px"><img src="{{getImageHelper authorPicture}}" height="105" width="120">{{#if can "modify-journal" "resource"  }}{{> updateAuthorCenterPictureModalForm}}{{/if}}</div>
        <div class="col-xs-4" style="margin-top: 60px"><a href="{{pdfValue}}" target="_blank">{{translateThis fileName.cn fileName.en}}&nbsp;&nbsp;<img src="/pdf.png" height="18" width="21"></a>{{#if can "modify-journal" "resource"  }}{{> updateAuthorCenterFileModalForm}}{{/if}}</div>
        {{else}}
        {{_ "No results found!"}}
        {{/each}}
    </div>
</template>

<template name="guideArticles">
    <div class="row">
        <div class="col-md-4">
            <p style="background-color: #d0e9c6">
                <strong>{{_"Submission Guidelines"}}</strong>
                {{#if can "add-author-center" "resource"  }}<span class="fa fa-plus" style="color: #2b8118;cursor: pointer" data-toggle="modal" data-target="#addInstructionsModal"></span>{{> addInstructionsModalForm}}{{/if}}
                <br>
            </p>
            <p style="background-color: #f8e5be">
                <ul>
                    {{#each instructions}}
                        <li><a href={{whichUrl}} target="_blank">{{translateThis title.cn title.en}}</a>{{#if can "modify-author-center" "resource"  }}{{> updateAuthorCenterModalForm}}{{/if}}</li>
                    {{else}}
                        {{_ "No results found!"}}
                    {{/each}}
                </ul>
            </p>
        </div>
        <div class="col-md-4">
            <p style="background-color: #d0e9c6">
                <strong>{{_"Prepare Manuscript"}}</strong>
                {{#if can "add-author-center" "resource"  }}<span class="fa fa-plus" style="color: #2b8118;cursor: pointer" data-toggle="modal" data-target="#addManuscriptModal"></span>{{> addManuscriptModalForm}}{{/if}}
                <br>
            </p>
            <p style="background-color: #f8e5be">

                    {{#each manuscript}}
                        <span style="margin-left: 15px">>>{{translateThis title.cn title.en}}{{#if can "modify-author-center" "resource"  }}{{> updateAuthorCenterModalForm}}{{/if}}</span>
                        {{#each childList}}
                            <ul>
                                <li><a href={{whichUrl}} target="_blank">{{translateThis title.cn title.en}}</a>{{#if can "modify-author-center" "resource"  }}{{> updateAuthorCenterModalForm}}{{/if}}</li>
                            </ul>
                        {{else}}
                            {{_ "No results found!"}}
                        {{/each}}
                    {{else}}
                        {{_ "No results found!"}}
                    {{/each}}
            </p>
        </div>
        <div class="col-md-4">
            <p style="background-color: #d0e9c6">
                <strong>{{_"Submit  Manuscript"}}</strong>
                {{#if can "add-author-center" "resource"  }}<span class="fa fa-plus" style="color: #2b8118;cursor: pointer" data-toggle="modal" data-target="#addSubmitManuscriptModal"></span>{{> addSubmitManuscriptModalForm}}{{/if}}
                <br>
            </p>
            <p style="background-color: #f8e5be">
                <ul>
                    {{#each submitManuscript}}
                    <li><a href={{whichUrl}} target="_blank">{{translateThis title.cn title.en}}</a>{{#if can "modify-author-center" "resource"  }}{{> updateSubmitManuscriptModalForm}}{{/if}}</li>
                    {{else}}
                    {{_ "No results found!"}}
                    {{/each}}
                </ul>
            </p>
        </div>
    </div>
</template>

<template name="updateAuthorCenterTitleModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="authorTitle,authorDescription" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>

<template name="updateAuthorCenterPictureModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="authorPicture" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>

<template name="updateAuthorCenterFileModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="fileName,fileId" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>


<template name="addInstructionsModalForm">
    <div class="modal fade" id="addInstructionsModal" tabindex="-1" role="dialog" aria-labelledby="addInstructionsModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addInstructionsModalLabel">{{_ "Add new"}}</h4>
                </div>
                {{#autoForm id="addInstructionsModalForm" collection="AuthorCenter" type="insert"}}
                <div class="modal-body">
                    {{> afQuickField name="title"}}
                    {{> afQuickField name="content"}}
                    {{> afQuickField name="url"}}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">{{_ "Create"}}</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="addManuscriptModalForm">
    <div class="modal fade" id="addManuscriptModal" tabindex="-1" role="dialog" aria-labelledby="addManuscriptModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addManuscriptModalLabel">{{_ "Add new"}}</h4>
                </div>
                {{#autoForm id="addManuscriptModalForm" collection="AuthorCenter" type="insert"}}
                <div class="modal-body">
                    {{> afQuickField name="title"}}
                    {{> afQuickField name="content"}}
                    {{> afQuickField name="url"}}
                    {{> afQuickField name="parentId" options=getManuscript }}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">{{_ "Create"}}</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="addSubmitManuscriptModalForm">
    <div class="modal fade" id="addSubmitManuscriptModal" tabindex="-1" role="dialog" aria-labelledby="addSubmitManuscriptModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addSubmitManuscriptModalLabel">{{_ "Add new"}}</h4>
                </div>
                {{#autoForm id="addSubmitManuscriptModalForm" collection="AuthorCenter" type="insert"}}
                <div class="modal-body">
                    {{> afQuickField name="title"}}
                    {{> afQuickField name="url"}}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">{{_ "Create"}}</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>

<template name="updateAuthorCenterModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="AuthorCenter" doc=_id operation="update" fields="title,content,url" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>

<template name="updateSubmitManuscriptModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="AuthorCenter" doc=_id operation="update" fields="title,url" buttonContent=getUpdateButtonContent}}{{/afModal}}
</template>