<template name="AboutTitle">
    <div class="tabbable">
        <div class="col-xs-3">
            <ul class="nav nav-pills nav-stacked aboutNavTabs">
                <li><a class="activeButton" data-aboutid="a" href="#a"  data-toggle="tab">{{_ "Editorial Policies"}}</a></li>
                <li><a class="activeButton" data-aboutid="b" href="#b"  data-toggle="tab">{{_ "Readers"}}</a></li>
                <li><a class="activeButton" data-aboutid="c" href="#c"  data-toggle="tab">{{_ "Contact"}}</a></li>
            </ul>
        </div>
        <div class="tab-content col-xs-9">
            <div class="tab-pane" id="a"><h3>{{_ "Editorial Policies"}}&nbsp;&nbsp;{{#if can "add-about-articles" "resource"  }}{{> addAboutArticlesModalForm}}{{/if}}</h3><hr>
                {{> aboutArticlesList}}
            </div>
            <div class="tab-pane" id="b"><h3>{{_ "Readers"}}&nbsp;&nbsp;{{#if can "add-about-articles" "resource"  }}{{> addAboutArticlesModalForm}}{{/if}}</h3><hr>
                {{> aboutArticlesList}}
            </div>
            <div class="tab-pane" id="c"><h3>{{_ "Contact"}}</h3><hr>
                {{> editorialMemberList}}
            </div>
        </div>
    </div>
</template>

<template name="aboutArticlesList">
    {{#each aboutArticle}}
        <div class="part"><p>
            <strong>{{translateThis titleCn titleEn}}&nbsp;：</strong>

            <div class="pull-right">
                {{#if can "modify-about-articles" "resource"  }}
                    {{> updateAboutArticlesModalForm}}
                {{/if}}
                {{#if can "delete-about-articles" "resource"  }}
                    {{> deleteAboutArticlesModalForm}}
                {{/if}}
            </div>
            </p>
            <p>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{translateThis descriptionCn descriptionEn}}
            </p>
        </div>
    {{else}}
        {{_ "No AboutArticle found!"}}
    {{/each}}
</template>

<template name="editorialMemberList">
    <div class="part">
        <p>
            {{#each aboutArticles}}
            {{translateThis descriptionCn descriptionEn}}{{#if can "modify-about-articles" "resource"  }}{{> updateAboutArticlesModalForm}}{{/if}}
            {{else}}
            {{_ "No AboutArticle found!"}}
            {{/each}}
            {{#if contactId}}
                {{#if can "add-about-articles" "resource"  }}{{> addAboutArticlesModalForm}}{{/if}}
            {{/if}}
        </p>
    </div>
        <p>
            <strong>编辑部成员简介</strong>
            <div class="pull-right">
            {{#if can "modify-editorial-member" "resource"  }}{{> addEditorialMemberModalForm}}{{/if}}
            </div>
        </p>
        {{#each members}}
        <div class="part">
            <p>
                <img src="{{getImageHelper picture}}" width="89" height="89"/>{{translateThis nameCn nameEn}}&nbsp;：&nbsp;{{translateThis abstractCn abstractEn}}<br>E-mail:{{email}}；&nbsp;Tel:{{phone}}
                {{#if can "modify-editorial-member" "resource"  }}{{> updateEditorialMemberModalForm}}{{/if}}&nbsp;&nbsp;{{#if can "delete-editorial-member" "resource"  }}{{> deleteEditorialMemberModalForm}}{{/if}}
            </p>
        </div>
        {{else}}
        {{_ "No results found!"}}
        {{/each}}
</template>

<template name="addAboutArticlesModalForm">
    {{#afModal formId="addAboutArticlesModal" class="fa fa-plus" collection="AboutArticles" operation="insert" omitFields="about,publications" title=getCreateButtonContent}}{{/afModal}}
</template>

<template name="addEditorialMemberModalForm">
    {{#afModal formId="addEditorialMemberModal" class="fa fa-plus" collection="EditorialMember" operation="insert" omitFields="about,publications" title=getCreateButtonContent}}{{/afModal}}
</template>

<template name="updateAboutArticlesModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="AboutArticles" doc=_id operation="update" omitFields="about,publications"}}{{/afModal}}
</template>

<template name="deleteAboutArticlesModalForm">
    {{#afModal class="fa fa-trash" collection="AboutArticles" operation="remove" doc=_id prompt=getPrompt}}{{/afModal}}
</template>

<template name="updateEditorialMemberModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="EditorialMember" doc=_id operation="update" omitFields="about,publications"}}{{/afModal}}
</template>

<template name="deleteEditorialMemberModalForm">
    {{#afModal class="fa fa-trash" collection="EditorialMember" operation="remove" doc=_id prompt=getPrompt}}{{/afModal}}
</template>