<template name="mediaList">
	{{#if can "modify-journal" "resource"}}
	{{#jkafModal template="addMediaForm" id="addMediaForm" class="btn btn-success"}}{{_ "Add new"}}{{/jkafModal}}
	{{/if}}
	<ul class="list-unstyled">
		{{#each medias}}
			<li>
				<div class="row">
					<div class="col-xs-5">
						{{> Template.dynamic template=dynamicTemp data=this}}

					</div>
					<div class="col-xs-7">
						{{#if can "modify-journal" "resource"}}
						<div class="pull-right">
							<a href="#" class="fa fa-trash"></a>
						</div>
						{{/if}}
						<h4>{{translateThis meta.title.cn meta.title.en}}</h4>

						<p>{{translateThis meta.description.cn meta.description.en}}</p>
					</div>
				</div>
			</li>
		{{/each}}
	</ul>
</template>

<template name="videoTemplate">
	<video width="100%" controls="controls">
		<source src="{{fileURL this}}?play=true" type="{{type}}"/>
	</video>
</template>

<template name="audioTemplate">
	<audio width="100%" controls="controls">
		<source src="{{fileURL this}}?play=true" type="{{type}}"/>
	</audio>
</template>

<template name="fileDownloadTemplate">
	<a href="{{fileURL this}}?download=true">{{name}}</a>
</template>

<template name="addMediaForm">
	{{#autoForm schema="MediasSchema" id="addMediaModalForm"}}
		<div class="modal-body">
			{{> afObjectField name="title"}}
			{{> afObjectField name="description"}}
			<div class="form-group{{#if isMediaInvalid}} has-error{{/if}}">
				<label class="control-label">{{_ "mediaFile"}}</label>
				<input class="media-uploader" name="media" type="file"/>

				{{#if isMediaInvalid}}
					<span class="help-block">{{_ "Please choose a media file"}}</span>
				{{/if}}
			</div>
			{{#if progress}}
				<div class="form-group progress">
					<div style="width:{{progress}}%" class="progress-bar progress-bar-striped active">
						<span class="sr-only">{{progress}}</span>
					</div>
				</div>
			{{/if}}
		</div>
		<div class="modal-footer">
			<button class="btn btn-primary">{{_ "Create"}}</button>
		</div>
	{{/autoForm}}
</template>