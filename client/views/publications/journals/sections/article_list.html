<template name="articleList">
    <div class="row">
        <div class="col-xs-3">
            {{> journalCoverSummary}}
            {{> journalNavigationPanel}}
            {{> historicalJournalNavigationPanel}}
        </div>
        <div class="col-xs-9">
            {{> articleListRight pubStatus="normal"}}
            {{> HistoricalJournalTable}}
        </div>
    </div>
</template>

<template name="journalNavigationPanel">
    <ul class="list-group">
        {{#each volumeInJournal _id}}
            <li class="volume list-group-item">
                <span class="volume-toggle"><i class="fa {{class}}"></i> {{_ "volumeItem" volume }}{{unionYear}}</span>
            </li>
            <ul id="vol_{{_id}}" class="issues list-group" style="display:{{issueDisplay}}">
                {{#each issueInVolume journalId volume}}
                    <li class="issue list-group-item" data-value="{{_id}}" data-volume="{{volume}}" data-issue="{{issue}}">
                        {{_ "issueItem" issue }} {{formatMonth}}
                    </li>
                {{/each}}
            </ul>
        {{/each}}
    </ul>
</template>

<template name="articleListRight">
    {{#if normal}}
        <h4>{{getIssueTitle}}</h4>
        {{#with issueContext}}
            {{#if permissionCheckWithScope "modify-journal" "resource"  "journal" journalId}}
                <div class="pull-right">
                    {{> updateIssueDescriptionModalForm}}
                </div>
            {{/if}}
            {{#if description}}
                {{description}}
            {{else}}
                {{#if can "modify-journal" "resource" }}
                    {{_ "No Cover Description"}}
                {{/if}}
            {{/if}}
        {{/with}}
        <hr>
        {{resetArticlesFilter}}
    {{/if}}
    <ul class="article-list list-unstyled">
        {{#each articles}}
            {{> oneArticle}}
        {{else}}
            {{_ "No articles found!"}}
        {{/each}}
    </ul>
</template>

<template name="HistoricalJournalTable">
    {{#unless historicalJournals}}
        <div class="pull-left">
            {{_ "No historical journal found!"}}
        </div>
    {{/unless}}

    {{#if historicalJournals}}
        <h4>{{_ "Historical Journal"}}</h4>
        <table id="dataview-table" class="table table-striped table-hover">
            <thead id="dataview-table-header">
            <tr id="dataview-table-header-row">
                <th class="th-sortable his-jour-title-th">
                    {{_ "Previous Title"}}
                </th>
                <th class="th-sortable">
                    {{_ "createAt"}}
                </th>
                <th class="th-sortable">
                    ISSN
                </th>
                <th class="th-sortable">
                    EISSN
                </th>
            </tr>
            </thead>
            <tbody id="dataview-table-items">
            {{#each historicalJournals}}
                {{> HistoricalJournalItem}}
            {{/each}}
            </tbody>
        </table>
    {{/if}}
</template>

<template name="HistoricalJournalItem">
    {{#with journalItemData this}}
    <tr id="dataview-table-items-row">
        <td>
            {{{translateThis titleCn title}}}
        </td>
        <td>
            {{moFormat createDate 'll'}}
        </td>
        <td>
            {{formatissn issn}}
        </td>
        <td>
            {{EISSN}}
        </td>
    </tr>
    {{/with}}
</template>

<template name="historicalJournalNavigationPanel">
    {{#if hasHisJournal}}
        <div class="historical-journal">
        <h5>{{_ "Historical Journal"}}</h5>

        {{#each sortedHisJournal}}

            <h6>{{{translateThis titleCn title}}}</h6>

            {{> journalNavigationPanel}}
        {{/each}}

        </div>
    {{/if}}
</template>