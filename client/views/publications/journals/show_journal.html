<template name="ShowJournal">
    {{ initPage _id publisher}}
    <div class="pull-right">
        {{#if can "modify-journal" "resource" }}
            {{> updatePublicationBannerModalForm}}
        {{/if}}
    </div>
    {{> journalBanner journal=_id}}
    <br>
    {{#if can "modify-journal" "resource"  }}
        <div class="pull-right">
            {{> updateJournalTabsModalForm}}
        </div>
    {{/if}}
    <br>
    {{> journalOptions}}
    <hr>
</template>

<template name="journalBanner">
    <h2><img src="{{getJournalBannerById journal}}" width="650" height="94" alt="{{title}}"></h2>
</template>

<template name="journalOptions">
    {{#journalTabs name="" tabs=tabs activeTab=activeTab}}

        {{#tabContent slug="Overview"}}
            {{#with context}}
                {{> JournalOverview}}
            {{/with}}
        {{/tabContent}}

        {{#tabContent slug="Browse"}}
            {{#with context}}
                {{> articleList}}
            {{/with}}
        {{/tabContent}}

        {{#tabContent slug="About"}}
            {{#with context}}
                {{> AboutTitle}}
            {{/with}}
        {{/tabContent}}

        {{#tabContent slug="Editorial Board"}}
            {{#with context}}

            {{/with}}
        {{/tabContent}}

        {{#tabContent slug="News"}}
            {{#with context}}

            {{/with}}
        {{/tabContent}}

        {{#tabContent slug="Media"}}
            {{#with context}}

            {{/with}}
        {{/tabContent}}

        {{#tabContent slug="Special Topics"}}
            {{#with context}}

            {{/with}}
        {{/tabContent}}

        {{#tabContent slug="Collections"}}
            {{#with context}}

            {{/with}}
        {{/tabContent}}

        {{#tabContent slug="Accepted"}}
            {{#with context}}

            {{/with}}
        {{/tabContent}}

        {{#tabContent slug="Online First"}}
            {{#with context}}

            {{/with}}
        {{/tabContent}}

        {{#tabContent slug="MOOP"}}
            {{#with context}}

            {{/with}}
        {{/tabContent}}

        {{#tabContent slug="Author"}}
            {{#with context}}

            {{/with}}
        {{/tabContent}}
    {{/journalTabs}}
</template>

<template name="journalTabs">
    <div class="journalTabs-container">

        {{#if activeTab}}
            {{trackActiveTab activeTab}}
        {{/if}}

        {{trackTabs tabs}}

        <ul class="nav nav-tabs" role="tablist">
            {{#each tabs}}
                <li role="presentation" class="tab-item {{isActiveTab slug}}">
	                <a role="tab" data-toggle="tab">{{name}}</a>
                </li>
            {{/each}}
        </ul>

        <div class="tabs-content-container">
            {{> UI.contentBlock context=__context__ }}
        </div>
    </div>
</template>

<template name="updatePublicationDescriptionModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="description" buttonContent=getUpdateButtonContent}}
    {{/afModal}}
</template>

<template name="updatePublicationPictureModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="picture" buttonContent=getUpdateButtonContent}}
    {{/afModal}}
</template>

<template name="updatePublicationBannerModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="banner" buttonContent=getUpdateButtonContent}}
    {{/afModal}}
</template>

<template name="updateJournalTabsModalForm">
    {{#afModal class="fa fa-pencil" title=getUpdateButtonContent collection="Publications" doc=_id operation="update" fields="tabSelections" buttonContent=getUpdateButtonContent}}
    {{/afModal}}
</template>


