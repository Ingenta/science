<template name="AccountTabsTemplate">
    {{> columeTitle titleName="Account"}}
    {{> accountOptions}}
</template>

<template name="AdminUsers">
    <div class="container-fluid" id="content">
        <div class="row" id="title_row">
            <div class="col-xs-12">
                <div id="page_menu" class="pull-right">
                </div>
            </div>
        </div>

        {{> AdminUsersView}}
    </div>
</template>

<template name="AdminUsersView">
    <div id="data_view" class="">
        <div class="form-inline">
            <button type="button" class="btn btn-success">
                <span class="fa fa-plus">
                    {{_ "Add new"}}
                </span>
            </button>
            {{#if isShowButton}}
                <button type="button" class="btn btn-success" data-toggle="modal" data-target="#addUploadExcelModal">
                    <span class="fa fa-plus">
                        {{_ "Batch Add"}}
                    </span>
                </button>
            {{/if}}

                {{#if isNotEmpty}}
                    <div class="form-group">
                        <label class="sr-only" for="search">
                            {{_ "Search"}}
                        </label>
                        <input type="text" class="form-control searchValue" placeholder="{{_ 'Search'}}"
                               autofocus="autofocus">
                        <button type="button" class="btn btn-primary searchButton">
                            <span class="fa fa-search"></span>
                        </button>
                    </div>
                {{/if}}

        </div>
        {{#if isNotEmpty}}
            {{#if isNotFound}}
                <div class="alert alert-warning">
                    "{{searchString}}" not found.
                </div>
            {{else}}
                <div id="dataview-data">
                    {{#if viewAsTable}} {{> AdminUsersViewTable}} {{/if}}
                </div>
            {{/if}}
        {{else}}
            <div class="alert alert-info">
                {{_ "No users yet"}}
            </div>
        {{/if}}
    </div>
</template>

<template name="AdminUsersViewTable">
    <table id="dataview-table" class="table table-striped table-hover">
        <thead id="dataview-table-header">
        <tr id="dataview-table-header-row">
            <th class="th-sortable" data-sort="username">
                {{_ "User Name"}}
            </th>
            <th class="th-sortable">
                {{_ "E-mail"}}
            </th>
            <th class="th-sortable">
                {{_ "Role"}}
            </th>
            <th class="th-sortable">
                {{_ "Status"}}
            </th>
            <th>
                &nbsp;
            </th>
        </tr>
        </thead>
        <tbody id="dataview-table-items">
        {{#each tableItems}} {{> AdminUsersViewTableItems}} {{/each}}
        </tbody>
    </table>
</template>

<template name="AdminUsersViewTableItems">
    <tr id="dataview-table-items-row">
        <td>
            {{username}}
        </td>
        <td>
            {{#each emails}}
                {{address}}
            {{/each}}
        </td>
        <td>
            {{#each orbit_roles}}
                <span>[ {{geti18nName this}} ]</span>
            {{/each}}
        </td>
        <td>
            {{#if disable}}{{_ "Disable"}}{{else}}{{_ "Enable"}}{{/if}}
        </td>
        <td class="td-icon">
            {{#if can "user-modify" "user"}}
                <span id="edit-button" class="fa fa-pencil " title="Edit"></span>
            {{/if}}
        </td>
    </tr>
</template>

<template name="accountOptions">
    {{> addUploadExcelModalForm1}}
    {{#accountTabs name="" tabs=tabs activeTab=activeTab}}
        {{#tabContent slug="admin"}}
            {{> AdminUsers type="admin" admin_users=getAdmins}}
        {{/tabContent}}

        {{#tabContent slug="normal"}}
            {{> AdminUsers type="normal" admin_users=getNormals}}
        {{/tabContent}}

        {{#tabContent slug="publisher"}}
            {{> AdminUsers type="publisher" admin_users=getPublishers}}
        {{/tabContent}}

        {{#tabContent slug="institution"}}
            {{> AdminUsers type="institution" admin_users=getInstitution}}
        {{/tabContent}}
    {{/accountTabs}}

</template>

<template name="accountTabs">

    <div class="accountTabs-container">

        {{#if activeTab}}
            {{trackActiveTab activeTab}}
        {{/if}}

        {{trackTabs tabs}}

        <ul class="nav nav-tabs" role="tablist">
            {{#each tabs}}
                <li role="presentation" class="tab-item {{isActiveTab slug}}">
                    <a role="tab" data-toggle="tab">{{name}}</a>
                </li>
            {{/each}}
        </ul>

        <div class="tabs-content-container">
            {{> UI.contentBlock context=__context__ }}
        </div>
    </div>
</template>

<template name="addUploadExcelModalForm1">
    <div class="modal fade" id="addUploadExcelModal" tabindex="-1" role="dialog" aria-labelledby="addUploadExcelModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="addUploadExcelModalLabel">{{_ "Batch Add"}}</h4>
                </div>
                {{#autoForm id="addUploadExcelModalForm" collection="fileExcel" type="insert"}}
                <div class="modal-body">
                    {{> afQuickField name="fileId"}}
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">{{_ "Create"}}</button>
                </div>
                {{/autoForm}}
            </div>
        </div>
    </div>
</template>