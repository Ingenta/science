<template name="AdminUsersEdit">
    <div class="container-fluid" id="content">
        <div class="row" id="title_row">
            <div class="col-xs-12">
                <div id="page_menu" class="pull-right">
                </div>
            </div>
        </div>
        {{> AdminUsersEditEditForm}}
    </div>
</template>

<template name="AdminUsersEditEditForm">
    <div class="">
        {{> columeTitle titleName="Edit user"}}
        <form id="form" role="form">
            {{#if errorMessage}}
                <div class="alert alert-warning">
                    {{errorMessage}}
                </div>
            {{/if}}

            {{#if infoMessage}}
                <div class="alert alert-success">
                    {{infoMessage}}
                </div>
            {{/if}}
            {{#if admin_user.institutionId}}
                <div class="form-group">
                    <label>
                        {{_ "Institution"}}
                    </label>

                    <div class="input-div">
                        {{#with getInstitutionNameById}}
                            <input type="text" value="{{translateThis this.cn this.en}}" class="form-control"
                                   disabled="disabled">
                        {{/with}}
                    </div>
                </div>
            {{/if}}
            {{#if admin_user.publisherId}}
                <div class="form-group">
                    <label>
                        {{_ "Publisher"}}
                    </label>

                    <div class="input-div">
                        {{#with getPublisherNameById}}
                            <input type="text" value="{{translateThis this.chinesename this.name}}" class="form-control"
                                   disabled="disabled">
                        {{/with}}
                    </div>
                </div>
                {{#if isPublisherAdmin}}
                    <div class="form-group  field-profile-journal">
                        <label for="journalId">
                            {{_ "Journals"}}
                        </label>
                        <div class="input-div">
                            <select multiple name="journalId" class="form-control" required="required">
                                {{setJournalId}}
                                {{#each getJournals}}
                                    <option value="{{_id}}" {{optionIsSelected getJournalId _id}}>
                                        {{translateThis titleCn title}}
                                    </option>
                                {{/each}}
                            </select>
					<span id="help-text" class="help-block">
					</span>
					<span id="error-text" class="help-block">
					</span>
                        </div>
                    </div>
                {{/if}}
            {{/if}}
            <div class="form-group  field-name">
                <label for="username">
                    {{_ "User Name"}}
                </label>

                <div class="input-div">
                    <input type="text" name="username" value="{{admin_user.username}}" class="form-control"
                           autofocus="autofocus" required="required" data-type="string">
					<span id="help-text" class="help-block">
					</span>
					<span id="error-text" class="help-block">
					</span>
                </div>
            </div>
            <div class="form-group  field-email">
                <label for="email">
                    {{_ "E-mail"}}
                </label>

                <div class="input-div">
                    <input type="text" name="email" value="{{emailAddress}}" class="form-control" required="required"
                           data-type="email">
					<span id="help-text" class="help-block">
					</span>
					<span id="error-text" class="help-block">
					</span>
                </div>
            </div>
            <div class="form-group  field-status">
                <label for="status">
                    {{_ "Status"}}
                </label>

                <div class="input-div">
                    <input type="checkbox" name="disable" {{disableStatus}}>
                    <label for="disable">{{_ "Disable"}}</label>
                </div>
            </div>
            {{#if can "delegate-and-revoke" "permissions"}}
                {{> userEditRoles}}
            {{/if}}
            <div class="form-group">
                <div class="submit-div">
                    <button id="form-submit-button" class="btn btn-success" type="submit">
                        <span class="fa fa-check">
                            {{_ "Save"}}
                        </span>
                    </button>
                    <a href="#" id="form-cancel-button" class="btn btn-default">
                        {{_ "Cancel"}}
                    </a>
                </div>
            </div>
        </form>
    </div>
</template>

<template name="userEditRoles">
    <div class="form-group  field-roles">
        <label for="roles">
            {{_ "Role"}}
        </label>
        <div class="input-div">
            {{#each usersRoles}}
                <div class="radio">
                    <label>
                        <input type="checkbox" value="{{this}}" name="roles" data-type="array" {{itemIsChecked}} {{itemIsDisabled}}>
                        {{i18nName}}
                    </label>
                </div>
            {{/each}}
            <span id="help-text" class="help-block"></span>
			<span id="error-text" class="help-block"></span>
        </div>
    </div>
</template>
